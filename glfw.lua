---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by felix.
--- DateTime: 22/04/2020 21:17
---


local targets = require("luabuild.targets");

local function append(a, b)
    for _, v in ipairs(b) do
        table.insert(a, v)
    end
end

local sources = {
    "src/context.c",
    "src/init.c",
    "src/input.c",
    "src/monitor.c",
    "src/vulkan.c",
    "src/window.c"
};

if x11 then
    append(sources, {
        "src/x11_init.c",
        "src/x11_monitor.c",
        "src/x11_window.c",
        "src/xkb_unicode.c",
        "src/posix_time.c",
        "src/posix_thread.c",
        "src/glx_context.c",
        "src/egl_context.c",
        "src/osmesa_context.c"
    });
end

if wayland or x11 then
    append(sources, {
        "src/linux_joystick.c"
    });
end

for _, v in ipairs(sources) do
    print(v);
end

return targets.library {
    name = "glfw3";
    rule = "C_COMPILER";
    sources = sources;
    include_directories = {
        public = {"include"};
    };
    definitions = {
        _GLFW_X11 = 1;
    };
    linkArgs = {
        "-ldl", "-lpthread", "-lm", "/usr/lib/libX11.so"
    };
}